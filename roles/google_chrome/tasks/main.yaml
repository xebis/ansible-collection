---
- name: Add Google apt signing key
  become: true
  ansible.builtin.apt_key:
    url: "https://dl.google.com/linux/linux_signing_key.pub"
    state: present

- name: Add Google Chrome repository into sources list
  become: true
  ansible.builtin.apt_repository:
    repo: deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main
    state: present
    filename: google-chrome
  notify: Update deb packages

- name: Enforce upgrade and reboot now rather than at the end of the playbook
  ansible.builtin.meta: flush_handlers

- name: Install stable Google Chrome
  become: true
  ansible.builtin.apt:
    name: "google-chrome-stable"
    state: latest
